<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MCP Server (Browser)</title>
    <style>
      html,body{margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,sans-serif}
      header{padding:12px 16px;border-bottom:1px solid #eee;display:flex;gap:8px;align-items:center}
      main{padding:16px}
      code{background:#f7f7f7;padding:2px 6px;border-radius:4px}
      .pill{display:inline-block;padding:2px 8px;background:#eef;border-radius:999px;color:#334}
      .muted{color:#667}
    </style>
  </head>
  <body>
    <header>
      <strong>MCP Server (Browser)</strong>
      <span id="status" class="pill">waiting for parentâ€¦</span>
    </header>
    <main>
      <p class="muted">This page runs an MCP server inside the browser using <code>@modelcontextprotocol/sdk</code> over a <code>MessageChannel</code>.</p>
      <p class="muted">To connect, the parent window should send a <code>postMessage</code> with a transferred <code>MessagePort</code>:</p>
      <pre class="muted" style="overflow:auto;padding:12px;border:1px solid #eee;border-radius:8px;background:#fafafa"><code>// Parent window example
const iframe = document.querySelector('iframe');
const channel = new MessageChannel();
iframe.contentWindow.postMessage({ type: 'mcp:connect' }, '*', [channel.port1]);
// Use channel.port2 with an MCP client transport.
      </code></pre>
    </main>
    <script type="module" src="/assets/mcp-server.js"></script>
  </body>
  </html>

