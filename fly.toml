app = 'codex-rs'
primary_region = 'syd'

[build]
dockerfile = 'Dockerfile'

# Default port your app listens on. Adjust if your server uses a different port.
[env]
PORT = "8080"

# Expose HTTP service. Public and Flycast compatible.
# - Public: allocate IPs (e.g., `fly ips allocate-v4` / `fly ips allocate-v6`).
# - Private-only: don't allocate public IPs; use `<app>.flycast`.
[http_service]
internal_port = 8080

# Keep HTTP allowed so Flycast (HTTP-only) continues to work
force_https = true
auto_start_machines = true
auto_stop_machines = "suspend"
min_machines_running = 1

[[vm]]
memory = '1gb'
cpu_kind = 'shared'
cpus = 1
